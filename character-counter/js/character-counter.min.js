function sanitize(e){return e.field=e.field?e.field.trim():"",e.repeatable=e.repeatable?e.repeatable.trim():"",e.editable=e.editable?e.editable.trim():"",e.max=e.max?parseInt(e.max):"",e.min=e.min?parseInt(e.min):"",e.count=e.count?e.count.trim().toLowerCase():"",e.type=e.type?e.type.trim().toLowerCase():"",e.show=e.show?e.show.trim().toLowerCase():"",e.label=e.label?e.label:"",""===e.max&&(e.type="up"),e}function initCounter(e){if(sanitize(e),e.repeatable){document.getElementById("addRow_f_"+e.repeatable).addEventListener("click",function(){initCounter(e)});let n=document.getElementById("f_"+e.repeatable),i=".k_element_"+e.editable+" input";var t=n.querySelectorAll(i);for(let n of t)e.target=n,instantiateCounter(e)}else{let t=e.field||"f_"+e.editable;e.target=document.getElementById(t),instantiateCounter(e)}}function instantiateCounter(e){e.id=e.target.id+"_counter",document.getElementById(e.id)&&document.getElementById(e.id).remove();let t=document.createElement("p");t.setAttribute("id",e.id),t.style.textAlign="right",e.target.parentNode.appendChild(t),startCounter(e)}function startCounter(e){e.target.addEventListener("keyup",function(){updateCounter(e)}),e.target.addEventListener("keydown",function(){updateCounter(e)}),updateCounter(e)}function updateCounter(e){let t=document.getElementById(e.id);if("up"==e.type)n=e.target.value.length;else var n=e.max-e.target.value.length;t.innerHTML="<span>"+n+"</span>","up"==e.type?e.max&&n>e.max||n<e.min?t.children[0].style.color="red":t.children[0].style.color="green":n<e.min?t.children[0].style.color="red":t.children[0].style.color="green",e.min&&(e.show.indexOf("min")>=0||e.show.indexOf("both")>=0)&&(t.innerHTML="Min: "+e.min+"&nbsp;&nbsp;&nbsp;"+t.innerHTML),e.max&&(e.show.indexOf("max")>=0||e.show.indexOf("both")>=0)&&(t.innerHTML=t.innerHTML+"&nbsp;&nbsp;&nbsp;Max: "+e.max),t.innerHTML=e.label+"&nbsp;"+t.innerHTML}my_counters.forEach(initCounter);