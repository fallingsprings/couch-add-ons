function sanitize(e){return e.field=e.field?e.field.trim():"",e.repeatable=e.repeatable?e.repeatable.trim():"",e.editable=e.editable?e.editable.trim():"",e.max=e.max?parseInt(e.max):"",e.min=e.min?parseInt(e.min):"",e.count=e.count?e.count.trim().toLowerCase():"",e.type=e.type?e.type.trim().toLowerCase():"",e.show=e.show?e.show.trim().toLowerCase():"",e.label=e.label?e.label:"",""===e.max&&(e.type="up"),e}function initCounter(e){if(sanitize(e),e.repeatable){document.getElementById("addRow_f_"+e.repeatable).addEventListener("click",function(){initCounter(e)});let n=document.getElementById("f_"+e.repeatable),i=".k_element_"+e.editable+" input";t=[].slice.call(n.querySelectorAll(i))}else{let n=e.field||"f_"+e.editable;var t=[document.getElementById(n)]}t.forEach(t=>{let n=t.id+"_counter";document.getElementById(n)&&document.getElementById(n).remove();let i=document.createElement("p");i.setAttribute("id",n),i.style.textAlign="right",t.parentNode.appendChild(i),startCounter(t,n,e)})}function startCounter(e,t,n){updateCounter(e,t,n.max,n.min,n.type,n.show,n.label),e.addEventListener("keyup",function(){updateCounter(e,t,n.max,n.min,n.type,n.show,n.label)}),e.addEventListener("keydown",function(){updateCounter(e,t,n.max,n.min,n.type,n.show,n.label)})}function updateCounter(e,t,n,i,a,l,r){let o=document.getElementById(t);if("up"==a)d=e.value.length;else var d=n-e.value.length;o.innerHTML="<span>"+d+"</span>",o.children[0].style.color="up"==a?n&&d>n||d<i?"red":"green":d<i?"red":"green",i&&(l.indexOf("min")>=0||l.indexOf("both")>=0)&&(o.innerHTML="Min: "+i+"&nbsp;&nbsp;&nbsp;"+o.innerHTML),n&&(l.indexOf("max")>=0||l.indexOf("both")>=0)&&(o.innerHTML=o.innerHTML+"&nbsp;&nbsp;&nbsp;Max: "+n),o.innerHTML=r+"&nbsp;"+o.innerHTML}my_counters.forEach(initCounter);