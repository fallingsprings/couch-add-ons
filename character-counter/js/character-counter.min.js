function sanitize(e){return e.field=e.field?e.field.trim():"",e.repeatable=e.repeatable?e.repeatable.trim():"",e.editable=e.editable?e.editable.trim():"",e.max=e.max?parseInt(e.max):"",e.min=e.min?parseInt(e.min):"",e.type=e.type?e.type.trim().toLowerCase():"",e.show=e.show?e.show.trim().toLowerCase():"",e.label=e.label?e.label:"",""===e.max&&(e.type="up"),e}function initCounter(e){if(sanitize(e),e.repeatable){document.getElementById("addRow_f_"+e.repeatable).addEventListener("click",function(){initCounter(e)});let n=document.getElementById("f_"+e.repeatable),i=".k_element_"+e.editable+" input";var t=n.querySelectorAll(i);for(let n of t){instantiateCounter({max:e.max,min:e.min,type:e.type,show:e.show,label:e.label,target:n})}}else{let t=e.field||"f_"+e.editable;e.target=document.getElementById(t),instantiateCounter(e)}}function instantiateCounter(e){e.id=e.target.id+"_counter";let t=document.createElement("p");t.setAttribute("id",e.id),t.style.textAlign="right",e.target.parentNode.appendChild(t),e.target.addEventListener("keyup",function(){refreshCount(e)}),e.target.addEventListener("keydown",function(){refreshCount(e)}),buildCounter(e)}function buildCounter(e){e.element=document.getElementById(e.id),e.element.innerHTML="<span>"+e.count+"</span>",refreshCount(e),e.min&&(e.show.indexOf("min")>=0||e.show.indexOf("both")>=0)&&(e.element.innerHTML="Min: "+e.min+"&nbsp;&nbsp;&nbsp;"+e.element.innerHTML),e.max&&(e.show.indexOf("max")>=0||e.show.indexOf("both")>=0)&&(e.element.innerHTML=e.element.innerHTML+"&nbsp;&nbsp;&nbsp;Max: "+e.max),e.element.innerHTML=e.label+"&nbsp;"+e.element.innerHTML}function refreshCount(e){"up"==e.type?e.count=e.target.value.length:e.count=e.max-e.target.value.length,e.element.children[0].innerHTML=e.count,"up"==e.type?e.max&&e.count>e.max||e.count<e.min?e.element.children[0].style.color="red":e.element.children[0].style.color="green":e.count<e.min?e.element.children[0].style.color="red":e.element.children[0].style.color="green"}my_counters.forEach(initCounter);